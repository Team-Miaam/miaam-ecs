<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Component.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Component.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { checkInvalidSchemaAttributes, isValidSchema } from './utility/Schema.js';

import UndefinedSchemaException from './exceptions/UndefinedSchemaException.js';
import IllegalArgumentException from './exceptions/IllegalArgumentException.js';
import InterfaceException from './exceptions/InterfaceException.js';

/**
 * Abstract base class Component provides solid foundation for other component types to extend.
 *
 * @since 0.0.1
 * @public
 * @abstract
 * @class
 */
class Component {
	/**
	 * Schema of the component
	 *
	 * Do not manually access or set the schema directly,
	 * even if you know what you are doing!
	 * &lt;br>
	 * This library is intended and designed to be used using only accessible methods.
	 * Because of restrictions of private static variable of JS, schema is exposed.
	 * Do not take the advantage of this always use {@link setSchema} and {@link getSchema} methods.
	 *
	 * @see setSchema
	 * @see getSchema
	 *
	 * @since 0.0.1
	 * @static
	 * @readonly
	 * @type {Object}
	 */
	static schema;

	/**
	 * Properties of the component
	 *
	 * @since 0.0.1
	 * @private
	 * @type {Object}
	 */
	#props;

	/* ================================ CONSTRUCTORS ================================ */

	/**
	 * Instantiates a component object from passed down properties
	 *
	 * @param {Object} componentProps - properties of the component,
	 * all keys must be pre-specified in the component schema.
	 */
	constructor(componentProps) {
		if (process.env.NODE_ENV !== 'production') {
			if (this.constructor === Component) {
				throw new InterfaceException('Cannot instantiate component class. Component class is abstract.');
			}
		}
		this.reset(componentProps);
	}

	/* ================================ LIFECYCLE METHODS ================================ */

	/**
	 * Pre-init method gets executed just before a component is initialized
	 */
	preinit() {}

	/**
	 * Init method gets executed after the component is initialized
	 */
	init() {}

	/**
	 * Method to mark Component as updated
	 */
	update(props) {
		// non production mode error for props with invalid schema
		if (process.env.NODE_ENV !== 'production') {
			checkInvalidSchemaAttributes(this.getSchema(), props);
		}

		Object.keys(props).forEach((key) => {
			this[key] = props[key];
		});
	}

	/**
	 * Pre-destroy method gets executed just before a component gets destroyed
	 */
	preDestroy() {}

	/**
	 * Post-destory method gets executed after the component is destroyed
	 */
	postDestory() {}

	/**
	 * Destorys the component
	 */
	destroy() {}

	/**
	 * Resets the component to its default initial state pre-specified by schema
	 */
	reset(componentProps) {
		const props = componentProps || {};

		const schema = this.getSchema();
		if (schema ?? true) {
			// component object can't be instantiated without schema
			throw new UndefinedSchemaException(`Class schema is either null or undefined.
			Try calling the setSchema method before instantiating objects of this class.`);
		}

		// executing pre instantiation operations
		this.preinit();

		// non production mode error for props with invalid schema
		if (process.env.NODE_ENV !== 'production') {
			checkInvalidSchemaAttributes(schema, props);
		}

		// instantiating object
		Object.keys(schema).forEach((key) => {
			if (Object.prototype.hasOwnProperty.call(props, key)) {
				// creating identified schema defined properties from props
				this[key] = props[key];
			} else if (Object.prototype.hasOwnProperty.call(schema[key], 'defaultValue')) {
				// creating identified schema defined properties from schema defaults
				this[key] = schema[key].default;
			} else {
				// creating identified schema defined properties from type defaults
				const { type } = schema[key];
				this[key] = type.default;
			}
		});

		// executing post instantiation operations
		this.init();
	}

	/* ================================ GETTERS ================================ */

	getType() {}

	getId() {}

	static getSchema() {
		return this.schema;
	}

	/* ================================ SETTERS ================================ */

	/**
	 * Defines the schema of the component class
	 *
	 * @warning
	 * Component schema is theoretically constant
	 * i.e. you can set the schema of a component only once.
	 *
	 * @param {object} schema schema of the this component class
	 */
	static setSchema(schema) {
		if (process.env.NODE_ENV !== 'production') {
			if (this === Component) {
				throw new InterfaceException('Cannot set schema. Component class is abstract');
			} else if (this.schema) {
				throw new InterfaceException('Cannot set schema. Component schema can be set only once.');
			} else if (!isValidSchema(schema)) {
				throw new IllegalArgumentException('Cannot set schema. Provided schema is not valid.');
			}
		}

		this.schema = schema;
	}
}

export default Component;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Schema.html">Schema</a></li></ul><h3>Classes</h3><ul><li><a href="Component.html">Component</a></li><li><a href="IllegalArgumentException.html">IllegalArgumentException</a></li><li><a href="InterfaceException.html">InterfaceException</a></li><li><a href="Type.html">Type</a></li><li><a href="UndefinedSchemaException.html">UndefinedSchemaException</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Jul 04 2021 04:32:41 GMT+0600 (Bangladesh Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
