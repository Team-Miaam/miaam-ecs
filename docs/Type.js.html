<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Type.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Type.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import IllegalArgumentException from './exceptions/IllegalArgumentException.js';

/**
 * Type System plays a crucial role in schema definition and cloning.
 *
 * In schema definition when the default value of a particular type is not given
 * it is fetched from the type system. It ensures consistency and less undefined values.
 * So the default value of a newly declared type cannot be undefined.
 *
 * By providing a cloning method, it facilitates deep copying custom values of newly created types.
 *
 * @todo write examples and tutorials
 * @since 0.0.1
 * @class
 * @public
 */
class Type {
	/**
	 * Name of the type
	 *
	 * @since 0.0.1
	 * @constant
	 * @private
	 * @type {String}
	 */
	#name;

	/**
	 * Validator function checks whether a value can be of this type.
	 *
	 * @since 0.0.1
	 * @constant
	 * @private
	 * @type {Function}
	 */
	#validator;

	/**
	 * Clone function which clones (deep copies) supported values and returns the cloned value
	 *
	 * @since 0.0.1
	 * @constant
	 * @private
	 * @type {Function}
	 */
	#clone;

	/**
	 * Default value of the type when not initialized
	 *
	 * @since 0.0.1
	 * @constant
	 * @private
	 * @type {any}
	 */
	#defaultValue;

	/**
	 * Instantiates a custom type schema from provided arguments
	 *
	 * @since 0.0.1
	 * @param {String} name name of the type
	 * @param {Function} clone function that handles the responsibility of cloning values of this type
	 * @param {Function} validator function that validates type of any value against this type
	 * @param {any} defaultValue default value of the type
	 * @throws {IllegalArgumentException} when type of name is not string
	 * or validator is not a function with one argument
	 * or clone is not a function with one argument
	 * or default value is undefined
	 * or the default value cannot be validated against provided validator
	 */
	constructor(name, validator, clone, defaultValue) {
		if (process.env.NODE_ENV !== 'production') {
			if (!(typeof name === 'string')) {
				throw new IllegalArgumentException(
					'Cannot create new type definition. Provided type name is not a valid string.'
				);
			} else if (!(validator instanceof Function &amp;&amp; validator.length === 1)) {
				throw new IllegalArgumentException(
					'Cannot create new type definition. Provided function is not a valid validator function.'
				);
			} else if (!(clone instanceof Function &amp;&amp; clone.length === 1)) {
				throw new IllegalArgumentException(
					'Cannot create new type definition. Provided function is not a valid clone function.'
				);
			} else if (defaultValue === undefined) {
				throw new IllegalArgumentException('Cannot create new type definition. Provided default value is undefined.');
			} else if (validator(defaultValue) !== true) {
				throw new IllegalArgumentException(
					'Cannot create new type definition. Provided default value cannot be validated using provided validator.'
				);
			}
		}

		this.#name = name;
		this.#validator = validator;
		this.#clone = clone;
		this.#defaultValue = this.clone(defaultValue);
	}

	/**
	 * Getter method for accessing the type name
	 *
	 * @since 0.0.1
	 * @public
	 * @returns {String} the name of the type
	 */
	getName() {
		return this.#name;
	}

	/**
	 * Validates provided value against this type, i.e.
	 * it checks whether a value can be of this type.
	 *
	 * @since 0.0.1
	 * @public
	 * @param {any} value the value to validate against this type
	 * @returns {Boolean} true if the provided value can be validated against this type
	 */
	validate(value) {
		return this.#validator(value);
	}

	/**
	 * Clones the provided value using the clone function of defined type
	 *
	 * @since 0.0.1
	 * @public
	 * @param {any} value the value to clone
	 * @returns {any} the cloned value
	 * @throws {IllegalArgumentException} when value cannot be validated against this type
	 */
	clone(value) {
		if (process.env.NODE_ENV !== 'production') {
			if (!this.validate(value)) {
				throw new IllegalArgumentException('Provided value cannot be validated against this type.');
			}
		}
		return this.#clone(value);
	}

	/**
	 * Getter method for accessing the default value of the type
	 *
	 * @warning
	 * Default value is theoretically constant.
	 * If the default value is an object,
	 * it is possible to manually change the default value,
	 * but it is not desirable even when you know what you are doing!
	 * It may create inconsistency issues.
	 * Immutability constraint is not enforced because,
	 * it is costly from the point of view of performance.
	 *
	 * @since 0.0.1
	 * @public
	 * @returns {any} the default value of the type
	 */
	getDefaultValue() {
		return this.#defaultValue;
	}

	/**
	 * Returns the string representation of type
	 *
	 * @since 0.0.1
	 * @public
	 * @returns {String} string representation
	 */
	toString() {
		return `Type: ${this.getName()}`;
	}
}

export default Type;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Schema.html">Schema</a></li></ul><h3>Classes</h3><ul><li><a href="Component.html">Component</a></li><li><a href="IllegalArgumentException.html">IllegalArgumentException</a></li><li><a href="InterfaceException.html">InterfaceException</a></li><li><a href="Type.html">Type</a></li><li><a href="UndefinedSchemaException.html">UndefinedSchemaException</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Jul 04 2021 04:32:41 GMT+0600 (Bangladesh Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
